title: APP市场推广统计有效推广量新思路
date: 2016-02-28 15:54:14
tags: 运营
---

#### 豌豆荚的黑科技
> 日前，在一次下载[包名浏览器.apk]的时候搜索到了豌豆荚的网站，那就直接下载吧，可是下载后发现，文件有点大，安装到手机上之后，果然不是我要下载的软件，而是豌豆荚.apk，随机破口大骂，豌豆荚太猥琐了，误导用户下载自己的app，但是已经安装好了豌豆荚，那只能借用一下，心里嘀咕，安装好[包名浏览器]就把你给卸载掉。当我点开豌豆荚的时候，奇怪的事情发生了，豌豆荚自动的搜索到了[包名浏览器]，并且跳转到了下载详情页面。作为一名Android开发人员，不禁要『咦』的一声，表示不科学，这个黑科技有点意思怎么实现的尼？

  好奇心促使我，操开了豌豆荚的包，在文件目录里面并没有发现什么特别的。但是我很肯定，豌豆荚一定是当我在网页下载某个app的时候，把这个app的信息写入到了他自己apk中，找不到这个信息，我就想着自己怎么实现，刚好之前发现了一个神库-[MultiChannelPackageTool](https://github.com/seven456/MultiChannelPackageTool)，他是一个快速打多渠道包的解决方案。

*利用的是Zip文件“可以添加comment（摘要）”的数据结构特点，在文件的末尾写入任意数据，而不用重新解压zip文件（apk文件就是zip文件格式）；所以该工具不需要对apk文件解压缩和重新签名即可完成多渠道自动打包，高效速度快，无兼容性问题；
*

**有了这个思路，豌豆荚的黑科技实现起来就轻而易举了，只需要在用户下载的时候，把用户要下载的app 包名写入到豌豆荚.apk的comment摘要中，当用户第一次打开豌豆荚app的时候，程序读到有默认下载的app信息就直接去搜索就可以了。**


*这个神器最核心的价值就是能够，在固定的apk文件中动态写入指定的数据，当程序打开的时候，可以快速的读取写入的数据，完成约定的动作。
*
利用这个特性，可以开脑洞的想出更多黑科技。

#### 再看如何在市场推广中统计有些推广量：

>之前我在做alleria的时候，市场提出这样一个需求，我们的市场人员在推广我们的app 的时候，需要根据他们推广的用户数给他们评绩效，那么如何统计他们推广的数量？

当时这个需求我第一反应是，打很多的渠道包，因为友盟可以统计渠道安装数，但是市场人员千千万，我怎么才能打那么多的安装包尼，又想到写个脚本在那不停的打包，给每个市场人员都打一个apk，呵呵，每个版本打那么多的包，那么多的版本，可能管理起来会失控的。
然后我找到了一个国外的服务[AppFlyer](https://www.appsflyer.com/?utm_source=google&utm_medium=cpc&utm_term=appsflyer&utm_content=ad1&utm_campaign=Brand_Asia&gclid=Cj0KEQiA0sq2BRDRt6Scrqj71vQBEiQAg5bj0xdtdfdUbNeE-FFIHsNVgx-6m4DOiaqipjdApIxcui8aAuXE8P8HAQ)-一个以色列公司给出的多渠道分发统计解决方案，但是服务最后并没有很好的解决问题，太多的沟通问题，还和以色列的大妈开过视频。。。遂放弃了。
最后使用的方案是大家常见的，用户需要注册的时候填写一个邀请码。这个方案有太多的缺点，不一一列举，体验也是相当的差。

现在给出新思路，大家可能已经想到了：服务器上只保存这最新的一个版本apk，根据市场人员的邀请码生成一个邀请链接或者二维码。，当用户扫码访问这个链接的时候，服务器就可以获取这个邀请码，动态的写入到apk的comment中，当用户注册账户的时候，程序读取邀请码，自动绑定，神不知鬼不觉，这样在后台每个邀请码，有效下载，有效注册数量一目了然，有没有很屌的样子，完美解决这个问题。

#### 更多的脑洞
- 不同的分发渠道显示不同的欢迎页面
- 好友邀请链接下载的app，注册完之后，自动添加该好友
- app分发追踪
- 。。。

**总结的规律就是，如果你想让app安装后，执行某些和分发渠道有关的动作，你都可以使用这个方案。**


真心感谢[sevent456](https://github.com/seven456/MultiChannelPackageTool)提供的神器。

